---
import { contentfulClient } from '../lib/contentful';

const base = import.meta.env.BASE_URL;

const entries = await contentfulClient.getEntries({
  content_type: 'footer',
});

const footer = entries.items[0];
const adresse = footer?.fields?.adresse as string;
const telephone = footer?.fields?.telephone as string;
const email = footer?.fields?.email as string;
const lienFacebook = footer?.fields?.lienFacebook as string;
const lienInstagram = footer?.fields?.lienInstagram as string;
const lienYoutube = footer?.fields?.lienYoutube as string;
const lienHelloAsso = footer?.fields?.lienHelloAsso as string;
---

<footer class="c-global-container">
  <div class="left">
    <div>
      <h3>CHOEUR CASSIOPÉE</h3>
      <p class="adress">{adresse}</p>
      <a href=`${base}/mentions-legales`>Mentions légales</a>
    </div>
    <div>
      <h3>Téléphone</h3>
      {telephone && <p>{telephone}</p>}
    </div>
    <div>
      <h3>Courriel</h3>
      {email && <p>{email}</p>}
    </div>
  </div>
  <div class="right">
    <ul>
      {
        lienFacebook && (
          <li>
            <a href={lienFacebook} target="_blank">
              Facebook
            </a>
          </li>
        )
      }
      {
        lienInstagram && (
          <li>
            <a href={lienInstagram} target="_blank">
              Instagram
            </a>
          </li>
        )
      }
      {
        lienYoutube && (
          <li>
            <a href={lienYoutube} target="_blank">
              Youtube
            </a>
          </li>
        )
      }
      {
        lienHelloAsso && (
          <li>
            <a href={lienHelloAsso} target="_blank">
              HelloAsso
            </a>
          </li>
        )
      }
    </ul>
  </div>
</footer>

<style>
  footer {
    display: flex;
    justify-content: space-between;
    width: 100%;
    margin: 0 auto;
    padding-block: 3rem;
    font-size: 0.875rem;
    line-height: 1.6;

    h3 {
      margin-bottom: 0.25em;
      color: #333;
    }

    p {
      margin-top: 0;
    }

    .left {
      display: flex;
      gap: 5rem;

      a {
        color: #333;
        font-size: 0.875em;
        font-weight: 600;
        letter-spacing: 0.1em;
        border-bottom: 2px dotted #aa603d;
        text-decoration: none;
      }

      .adress {
        white-space: pre-line;
      }
    }

    .right {
      ul {
        list-style: none;
        margin: 0;
        padding: 0;
      }

      li {
        margin-top: 0.5em;
        text-align: right;

        a {
          color: #333;
          font-weight: 600;
          letter-spacing: 0.1em;
          border-bottom: 2px dotted #aa603d;
          text-decoration: none;
        }
      }
    }
  }

  @media (max-width: 980px) {
    footer {
      position: relative;
      flex-direction: column;
      gap: 1rem;
      padding: 2rem 1rem 5rem;

      .left {
        flex-direction: column;
        gap: 0;
        text-align: center;

        a {
          position: absolute;
          bottom: 1rem;
          left: 50%;
          transform: translateX(-50%);
        }
      }

      .right {
        li {
          text-align: center;
        }
      }
    }
  }
</style>
